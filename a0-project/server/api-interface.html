<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agri365 API Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        h1 {
            color: #1e3c72;
            font-size: 3em;
            margin-bottom: 10px;
        }

        .status-badge {
            display: inline-block;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 10px 30px;
            border-radius: 25px;
            font-weight: bold;
            margin-top: 15px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
        }

        .sidebar {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 30px;
            height: fit-content;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .sidebar h2 {
            color: #1e3c72;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .endpoint-list {
            list-style: none;
        }

        .endpoint-item {
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .endpoint-item:hover {
            background: #f0f4ff;
            border-left-color: #1e3c72;
            transform: translateX(5px);
        }

        .endpoint-item.active {
            background: #e3f2fd;
            border-left-color: #2a5298;
        }

        .method {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 0.85em;
            margin-right: 8px;
        }

        .method.get {
            background: #4caf50;
            color: white;
        }

        .method.post {
            background: #2196f3;
            color: white;
        }

        .content-area {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .test-section {
            margin-bottom: 40px;
        }

        .test-section h2 {
            color: #1e3c72;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .test-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .btn-info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .response-box {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            max-height: 500px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 15px;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
            font-weight: bold;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .endpoint-url {
            background: #f5f5f5;
            padding: 10px 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            border-left: 3px solid #667eea;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-card p {
            opacity: 0.9;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üåæ Agri365 API Interface</h1>
            <p style="font-size: 1.2em; color: #666; margin-top: 10px;">
                REST API for Agricultural Management System
            </p>
            <div class="status-badge">
                ‚úÖ Server Running on http://localhost:3000
            </div>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <h2>üìã API Endpoints</h2>
                <ul class="endpoint-list">
                    <li class="endpoint-item active" onclick="showEndpoint('home')">
                        <span class="method get">GET</span> /
                    </li>
                    <li class="endpoint-item" onclick="showEndpoint('weather')">
                        <span class="method get">GET</span> /api/weather
                    </li>
                    <li class="endpoint-item" onclick="showEndpoint('market')">
                        <span class="method get">GET</span> /api/market-prices
                    </li>
                    <li class="endpoint-item" onclick="showEndpoint('pests')">
                        <span class="method get">GET</span> /api/pests
                    </li>
                    <li class="endpoint-item" onclick="showEndpoint('pestIdentify')">
                        <span class="method post">POST</span> /api/pests/identify
                    </li>
                    <li class="endpoint-item" onclick="showEndpoint('soil')">
                        <span class="method get">GET</span> /api/soil-test
                    </li>
                    <li class="endpoint-item" onclick="showEndpoint('cropHealth')">
                        <span class="method post">POST</span> /api/crop-health
                    </li>
                    <li class="endpoint-item" onclick="showEndpoint('diagnostics')">
                        <span class="method get">GET</span> /api/diagnostics
                    </li>
                    <li class="endpoint-item" onclick="showEndpoint('community')">
                        <span class="method get">GET</span> /api/community/posts
                    </li>
                    <li class="endpoint-item" onclick="showEndpoint('login')">
                        <span class="method post">POST</span> /api/auth/login
                    </li>
                </ul>
            </div>

            <div class="content-area">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>10+</h3>
                        <p>API Endpoints</p>
                    </div>
                    <div class="stat-card">
                        <h3>100%</h3>
                        <p>Uptime</p>
                    </div>
                    <div class="stat-card">
                        <h3>REST</h3>
                        <p>API Standard</p>
                    </div>
                </div>

                <div id="endpoint-content">
                    <!-- Content will be dynamically loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:3000';

        const endpoints = {
            home: {
                title: 'API Information',
                description: 'Get information about all available endpoints',
                url: '/',
                method: 'GET',
                test: () => testEndpoint('/')
            },
            weather: {
                title: 'Weather Forecast',
                description: 'Get current weather and forecast data',
                url: '/api/weather',
                method: 'GET',
                test: () => testEndpoint('/api/weather')
            },
            market: {
                title: 'Market Prices',
                description: 'Get current agricultural market prices',
                url: '/api/market-prices',
                method: 'GET',
                test: () => testEndpoint('/api/market-prices')
            },
            pests: {
                title: 'Pest Database',
                description: 'Get list of all pests in the database',
                url: '/api/pests',
                method: 'GET',
                test: () => testEndpoint('/api/pests')
            },
            pestIdentify: {
                title: 'Identify Pest',
                description: 'Identify a pest from image data',
                url: '/api/pests/identify',
                method: 'POST',
                test: () => testPostEndpoint('/api/pests/identify', { imageData: 'sample_base64_data' })
            },
            soil: {
                title: 'Soil Test Results',
                description: 'Get soil test analysis and recommendations',
                url: '/api/soil-test',
                method: 'GET',
                test: () => testEndpoint('/api/soil-test')
            },
            cropHealth: {
                title: 'Crop Health Analysis',
                description: 'Analyze crop health and get recommendations',
                url: '/api/crop-health',
                method: 'POST',
                test: () => testPostEndpoint('/api/crop-health', {
                    cropType: 'wheat',
                    symptoms: ['yellowing leaves', 'wilting']
                })
            },
            diagnostics: {
                title: 'System Diagnostics',
                description: 'Get system status and sensor data',
                url: '/api/diagnostics',
                method: 'GET',
                test: () => testEndpoint('/api/diagnostics')
            },
            community: {
                title: 'Community Posts',
                description: 'Get community posts from farmers',
                url: '/api/community/posts',
                method: 'GET',
                test: () => testEndpoint('/api/community/posts')
            },
            login: {
                title: 'User Login',
                description: 'Authenticate user and get access token',
                url: '/api/auth/login',
                method: 'POST',
                test: () => testPostEndpoint('/api/auth/login', {
                    email: 'demo@agri365.com',
                    password: 'password123'
                })
            }
        };

        function showEndpoint(key) {
            // Update active state
            document.querySelectorAll('.endpoint-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.endpoint-item').classList.add('active');

            const endpoint = endpoints[key];
            const content = `
                <div class="test-section">
                    <h2>${endpoint.title}</h2>
                    <div class="info-box">
                        ${endpoint.description}
                    </div>
                    <div class="endpoint-url">
                        <strong>${endpoint.method}</strong> ${API_BASE}${endpoint.url}
                    </div>
                    <div class="test-controls">
                        <button class="btn btn-primary" onclick="endpoints['${key}'].test()">
                            üöÄ Test Endpoint
                        </button>
                        <button class="btn btn-info" onclick="copyUrl('${endpoint.url}')">
                            üìã Copy URL
                        </button>
                    </div>
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        Loading...
                    </div>
                    <div id="response"></div>
                </div>
            `;
            document.getElementById('endpoint-content').innerHTML = content;
        }

        async function testEndpoint(path) {
            showLoading(true);
            try {
                const response = await fetch(API_BASE + path);
                const data = await response.json();
                displayResponse(data, response.status);
            } catch (error) {
                displayError(error);
            }
            showLoading(false);
        }

        async function testPostEndpoint(path, body) {
            showLoading(true);
            try {
                const response = await fetch(API_BASE + path, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(body)
                });
                const data = await response.json();
                displayResponse(data, response.status);
            } catch (error) {
                displayError(error);
            }
            showLoading(false);
        }

        function displayResponse(data, status) {
            const responseDiv = document.getElementById('response');
            const statusColor = status === 200 ? '#38ef7d' : '#ff6b6b';
            responseDiv.innerHTML = `
                <div style="margin-bottom: 10px; color: ${statusColor}; font-weight: bold;">
                    Status: ${status} ${status === 200 ? '‚úÖ Success' : '‚ùå Error'}
                </div>
                <div class="response-box">${JSON.stringify(data, null, 2)}</div>
            `;
        }

        function displayError(error) {
            const responseDiv = document.getElementById('response');
            responseDiv.innerHTML = `
                <div style="margin-bottom: 10px; color: #ff6b6b; font-weight: bold;">
                    ‚ùå Error
                </div>
                <div class="response-box">Error: ${error.message}\n\nMake sure the API server is running on http://localhost:3000</div>
            `;
        }

        function showLoading(show) {
            const loading = document.getElementById('loading');
            if (loading) {
                loading.classList.toggle('active', show);
            }
        }

        function copyUrl(path) {
            navigator.clipboard.writeText(API_BASE + path);
            alert('URL copied to clipboard!');
        }

        // Initialize with home endpoint
        window.onload = () => {
            showEndpoint('home');
        };
    </script>
</body>

</html>